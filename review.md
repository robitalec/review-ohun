## Package Review

*Please check off boxes as applicable, and elaborate in comments below. Your review is not limited to these topics, as described in the reviewer guide*

-   **Briefly describe any working relationship you have (had) with the package authors.**
-   [x] As the reviewer I confirm that there are no [conflicts of interest](https://devguide.ropensci.org/policies.html#coi) for me to review this work (if you are unsure whether you are in conflict, please speak to your editor *before* starting your review).


#### Documentation

The package includes all the following forms of documentation:

-   [x] **A statement of need:** clearly stating problems the software is designed to solve and its target audience in README
-   [x] **Installation instructions:** for the development version of package and any non-standard dependencies in README
-   [x] **Vignette(s):** demonstrating major functionality that runs successfully locally
-   [x] **Function Documentation:** for all exported functions
-   [ ] **Examples:** (that run successfully locally) for all exported functions
-   [x] **Community guidelines:** including contribution guidelines in the README or CONTRIBUTING, and DESCRIPTION with `URL`, `BugReports` and `Maintainer` (which may be autogenerated via `Authors@R`).

#### Functionality

-   [x] **Installation:** Installation succeeds as documented.
-   [ ] **Functionality:** Any functional claims of the software been confirmed.
-   [ ] **Performance:** Any performance claims of the software been confirmed.
-   [ ] **Automated tests:** Unit tests cover essential functions of the package and a reasonable range of inputs and conditions. All tests pass on the local machine.
-   [ ] **Packaging guidelines**: The package conforms to the rOpenSci packaging guidelines.

Estimated hours spent reviewing:

-   [ ] Should the author(s) deem it appropriate, I agree to be acknowledged as a package reviewer ("rev" role) in the package DESCRIPTION file.

------------------------------------------------------------------------

### Review Comments

#### Documentation

**A statement of need**

- TODO: compare, contrast with other options
- TODO: how does ohun integrate with other packages?


**Installation instructions**

-   Please consider including a link to the documentation for the dependency `seewave` for installing and troubleshooting system requirements. For example: <https://rug.mnhn.fr/seewave/inst.html>



**Vignette(s)** 

- TODO: split into multiple vignettes
- TODO: consider not blocking warnings that a user would get on their own machine

**Function Documentation** 

**Examples**

- Found errors locally using `devtools::run_examples()`


If recommendation to move `tuneR` to , the following issues can be resolved

In `feature_acoustic_data.R`:

- `could not find function "writeWave"` fixed by adding `library(tuneR)`



**Community guidelines**

-   Please consider also including the link to the repository (<https://github.com/maRce10/ohun>) as it should have the most consistently up to date information for the package, for example in the case that the website is not updated (PR).

#### Functionality

**Installation**

**Functionality**

**Performance**

**Automated tests**

**Packaging guidelines**

- curly braces (looks like fixed using styler package (https://github.com/robitalec/ohun/commit/6a32910cd5a794e274dc96ca44a1ca486434e075)) 
- don't forget to update codemeta
- looks good: snake case, object verb

For **Community guidelines:**,



Packaging guidelines


- 1 Packaging Guide
- 1.1 Package name and metadata
    - 1.1.1 Naming your package
      + looks good
    - 1.1.2 Creating metadata for your package
      + don't forget to update (https://github.com/ropensci/codemetar#keep-codemetajson-up-to-date)
- 1.2 Platforms
- 1.3 Package API
    - 1.3.1 Function and argument naming
      + looks good: snake case, object verb
      + not clear that functions are easily pipeable, if so, consider including
        an example in a vignette with the pipe `|>`
      
```r
library(ohun)
#> Loading required package: tuneR
#> Loading required package: warbleR
#> Loading required package: seewave
#> Loading required package: NatureSounds
#> Loading required package: knitr
lsf.str('package:ohun')
#> consensus_detection : function (detection, by = "overlap", filter = "max", cores = 1, pb = TRUE)  
#> diagnose_detection : function (reference, detection, by.sound.file = FALSE, time.diagnostics = FALSE, 
#>     cores = 1, pb = TRUE, path = NULL, by = NULL, macro.average = FALSE, 
#>     min.overlap = 0.5)  
#> energy_detector : function (files = NULL, envelopes = NULL, path = ".", hop.size = 11.6, 
#>     wl = NULL, thinning = 1, bp = NULL, smooth = 5, threshold = 5, peak.amplitude = 0, 
#>     hold.time = 0, min.duration = 0, max.duration = Inf, cores = 1, pb = TRUE)  
#> feature_acoustic_data : function (path = ".", digits = 2)  
#> feature_reference : function (reference, path = NULL, by.sound.file = FALSE, units = c("ms", 
#>     "kHz"), digits = 2)  
#> filter_detection : function (detection, by = "overlap", filter = "max", cores = 1, pb = TRUE)  
#> get_envelopes : function (path = ".", files = NULL, bp = NULL, hop.size = 11.6, wl = NULL, 
#>     cores = 1, thinning = 1, pb = TRUE, smooth = 5, normalize = TRUE)  
#> get_templates : function (reference, acoustic.space = NULL, path = ".", n.sub.spaces = 1, 
#>     plot = TRUE, color = "#21908C4D", ...)  
#> label_detection : function (reference, detection, cores = 1, pb = TRUE, min.overlap = 0.5)  
#> label_spectro : function (wave, reference = NULL, detection = NULL, envelope = FALSE, threshold = NULL, 
#>     smooth = 5, collevels = seq(-100, 0, 5), palette = viridis::viridis, 
#>     template.correlation = NULL, line.x.position = 2, hop.size = NULL, 
#>     ...)  
#> merge_overlaps : function (X, pb = TRUE, cores = 1)  
#> optimize_energy_detector : function (reference, files = NULL, threshold = 5, peak.amplitude = 0, hop.size = 11.6, 
#>     wl = NULL, smooth = 5, hold.time = 0, min.duration = NULL, max.duration = NULL, 
#>     thinning = 1, cores = 1, pb = TRUE, by.sound.file = FALSE, bp = NULL, 
#>     path = ".", previous.output = NULL, envelopes = NULL, macro.average = FALSE, 
#>     min.overlap = 0.5)  
#> optimize_template_detector : function (template.correlations, reference, threshold, cores = 1, pb = TRUE, 
#>     by.sound.file = FALSE, previous.output = NULL, macro.average = FALSE, 
#>     min.overlap = 0.5)  
#> split_acoustic_data : function (path = ".", sgmt.dur = 10, sgmts = NULL, files = NULL, cores = 1, 
#>     pb = TRUE, only.sels = FALSE, X = NULL)  
#> summarize_diagnostic : function (diagnostic, time.diagnostics = FALSE, macro.average = FALSE)  
#> template_correlator : function (templates, files = NULL, hop.size = 11.6, wl = NULL, ovlp = 0, 
#>     wn = "hanning", cor.method = "pearson", cores = 1, path = ".", pb = TRUE, 
#>     type = "fourier", fbtype = "mel", ...)  
#> template_detector : function (template.correlations, cores = 1, threshold, pb = TRUE, verbose = TRUE)
```
    - 1.3.2 Console messages
      + see note about message2() and warning2()
    - 1.3.3 Interactive/Graphical Interfaces
- 1.4 Code Style
      + looks good: recent commit with styler package
- 1.5 CITATION file
      + looks good
      + consider using a cffr GitHub action: https://docs.ropensci.org/cffr/reference/cff_gha_update.html
- 1.6 README
      + additional setup for seewave
      + brief demo usage
      + compare to other packages, options
      + describe how it integrates with other packages
- 1.7 Documentation
    - 1.7.1 General
      + looks good: all functions documented with examples, citations in vignette
      + looks good: good use of seealso, all functions have return
      + highlight potential overlap in functionality
    - 1.7.2 roxygen2 use
      + Add #' @noRd to internal functions.
    - 1.7.3 URLs in documentation
      + URLs look good with `urlchecker`
- 1.8 Documentation website
    - 1.8.1 Automatic deployment of the documentation website
    - 1.8.2 Grouping functions in the reference
    - 1.8.3 Branding of authors
    - 1.8.4 Tweaking the navbar
    - 1.8.5 Mathjax
    - 1.8.6 Package logo
- 1.9 Authorship
    - 1.9.1 Authorship of included code
- 1.10 Licence
      + looks good
- 1.11 Testing
      + consider using vdiffr for testing plots
- 1.12 Examples
- 1.13 Package dependencies
      + see note about imports/depends
      + 
- 1.14 Recommended scaffolding
- 1.15 Version Control
- 1.16 Miscellaneous CRAN gotchas
    - 1.16.1 CRAN checks
- 1.17 Bioconductor gotchas
- 1.18 Further guidance
    - 1.18.1 Learning about package development

